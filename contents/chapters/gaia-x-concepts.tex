\chapter{Gaia-X Concepts}\label{ch:gaia-x-concepts}

\begin{chapterabstract}
    This chapter presents essential concepts used in the Gaia-X ecosystem, providing additional context needed to understand the Gaia-X vision of federated data spaces.
\end{chapterabstract}

\section{Credentials}\label{sec:credentials}

Gaia-X Credentials, formerly known as Gaia-X Self-Descriptions, are the main conceptual building blocks of the \textit{Gaia-X ecosystem}~\cite{gaiax_architecture_document}.
They formalize all the claims and descriptions made by all parties participating in the ecosystem.
They are based on the formal \textit{Verifiable Credentials Data Model}~\cite{verifiable_credentials} specification issued by the \textit{World Wide Web Consortium} (W3C) and the Linked Data (LD) concept.

Verifiable Credentials are inspired by physical credentials like \textit{government-issued passports}, \textit{driving licenses} and \textit{university diplomas}.
They contain information about some statements the credential holder is trying to prove (citizenship, achieved education, etc.) and are secured by some protective element from the issuer, establishing the document's veracity, which the verifier can verify.
Their software counterpart (VCs) work in a similar way.
They contain data with relevance to the holder, which is structured based on well-defined templates called \textit{schemas} or \textit{vocabularies}, which describe which claims can be made in the document.

The claim consists of a subject (credential holder), property and a value, for example, Pat being an alumnus of ``Example University''~\ref{fig:verifiable-credential-claim}.
These claims are then packed into the credential body along with metadata such as the issuer, issuance date or the expiration date.
Although other formats are permitted, the base format VCs are encoded in is the JSON (JavaScript Object Notation) format or, more specifically, the extension for \textit{Linked Data} --- JSON-LD; this ensures the data is machine-readable and can be interlinked between each other.
The issuer then signs the credential using a digital signature inserted into the VC's proof section.
This process provides a machine-readable cryptographical proof, which secures the credential and can be used by the verifier to verify the holder's claims.

\begin{figure}[h]
    \centering
    \includegraphics[width=0.8\textwidth]{figures/verifiable-credential-claim-example.png}
    \caption{An example claim expressing Pat being an alumnus of ``Example University''~\cite{verifiable_credentials}.}\label{fig:verifiable-credential-claim}
\end{figure}

\begin{figure}
    \centering
    \includegraphics[width=\textwidth]{figures/verifiable-credentials.png}
    \caption{Verifiable Credential roles and information flow~\cite{verifiable_credentials}. Multiple claims are then packed into one Verifiable Credential.}\label{fig:verifiable-credentials}
\end{figure}

Gaia-X utilizes VCs for almost all of the objects in the ecosystem, from the \texttt{Participant}, serving as a description of a natural person or a legal entity, to the \texttt{ServiceOffering} and \texttt{Resource} credentials, specifying the offered services or data.
Gaia-X provides the so-called Gaia-X Trust Framework, which enforces syntactic correctness, schema validity, cryptographic signature validation, attribute value consistency, and attribute value verification~\cite{gaiax_architecture_document}.
The validation process ensures \textit{compliance} with the minimal requirements defined by Gaia-X specifications is met.
However, thanks to the possible extensibility of the VC schemas, each federation can impose new rules for the credentials that federation Participants must obey.

\begin{figure}
    \centering
    \begin{minted}[bgcolor=LightGray,breaklines,breakanywhere]{json}
{
  "@context": [
    "https://www.w3.org/2018/credentials/v1",
    "https://w3id.org/security/suites/jws-2020/v1",
    "https://registry.lab.gaia-x.eu/development/api/trusted-shape-registry/v1/shapes/jsonld/trustframework#"
  ],
  "type": [
    "VerifiableCredential"
  ],
  "id": "https://gaia-x-dev.simerda.dev/gaia-x/acme-corp/participant.json",
  "issuer": "did:web:gaia-x-dev.simerda.dev:gaia-x:acme-corp",
  "issuanceDate": "2024-08-27T07:31:38.012+00:00",
  "credentialSubject": {
    "id": "https://gaia-x-dev.simerda.dev/gaia-x/acme-corp/participant.json#cs",
    "type": "gx:LegalParticipant",
    "gx:legalName": "Acme Corporation",
    "gx:legalRegistrationNumber": {
      "id": "https://gaia-x-dev.simerda.dev/gaia-x/acme-corp/legal-registration-number.json#cs"
    },
    "gx:headquarterAddress": {
      "gx:countrySubdivisionCode": "DE-BY"
    },
    "gx:legalAddress": {
      "gx:countrySubdivisionCode": "DE-BY"
    }
  },
  "proof": {
    "created": "2024-08-27T07:31:38.746+00:00",
    "type": "JsonWebSignature2020",
    "proofPurpose": "assertionMethod",
    "verificationMethod": "did:web:gaia-x-dev.simerda.dev:gaia-x:acme-corp#JWK2020-RSA",
    "jws": "eyJhbGciOiJQUzI1NiIsImI2NCI6ZmFsc2UsImNyaXQiOlsiYjY0Il19..xoMpx55vYkhGFn3iRJInsxidCMmcnWi8DbX4L4DK-G9AWYf4iD-TDBwiwV2NnxN_UxlWq8g05StNP4C5xN2l6R35-8l4zxIvhD4tqQufacyep9K4k1U7hLwBAkfi3BiKBrWp-B5rtS6-Q2Y7iyBKS_dSSr0fENJZbdeKrRDUVJV7u-wphjEb9hWBuZrKtN6ImL2jRZiP-BDSk8rftqf4CvdbtFtF1tOZRo8-AYZVfwLgUjvJY-OWp5fEnGyCqB5O7fVCnallYy2tXwcmwnlGxzqoa2fG7wvsoUdS4bE7TdLWamF7m1aCce6-T3OJLTvLAhPw7hwAnVqXGdgzNsowWQ"
  }
}
    \end{minted}
    \caption{Example of a Gaia-X Participant Credential.}\label{fig:gaia_x_credential_example}
\end{figure}

\subsection{General Gaia-X Credentials}\label{subsec:general-gaia-x-credentials}

The following general types of Gaia-X Credentials are defined~\cite{gaiax_architecture_document,gaiax_trust_framework}:
\begin{itemize}
    \item \textbf{Participant} --- Represents a participant onboarded into the Gaia-X ecosystem.
    Participants can either be a LegalPerson or a NaturalPerson and are always interlinked to the ServiceOfferings they are providing.
    \item \textbf{LegalRegistrationNumber} --- Represents a registration number of a legal entity and must be linked to the LegalPerson type of the Participant credential.
    It can be one of the following numbers:
    \begin{itemize}
        \item \textbf{local}: A state-issued company number.
        \item \textbf{EUID}: A unique identifier for businesses located in the EEA.
        \item \textbf{EORI}: The Economic Operators Registration and Identification number.
        \item \textbf{vatID}: The VAT identification number.
        \item \textbf{leiCode}: The LEI (Legal Entity Identifier) code as defined by \url{https://www.gleif.org}.
    \end{itemize}
    \item \textbf{GaiaXTermsAndConditions} --- Represents a Participant's agreement to the Gaia-X terms and conditions and commits to keep its Gaia-X Credentials up-to-date.
    The \textit{Gaia-X Association} may revoke the keypair used to sign the VC upon failure to comply with these rules.
    \item \textbf{Resource} --- Represents a resource a Participant desires to make available.
    It can be of the type PhysicalResource, which is related to a hardware component occupying physical space (e.g., a data center, a hardware service, a plant,~\ldots), or of the VirtualResource type, which describes virtual artifacts (e.g., a dataset, software, a configuration file, and AI model,~\ldots).
    \item \textbf{ServiceOffering} --- Represents an aggregation of Resource Credentials and defines terms and conditions of usage.
    ServiceOffering is the main credential used to promote an offered service.
    It can be exposed on the provider's web server or published in a federated catalogue to allow searchability and findability.
    \item \textbf{ServiceInstance} --- Represents a running instance of a Virtual Resource; hence, it's also known as an \textit{Instantiated Virtual Resource}.
    It is mainly used for instantiating a \textit{Software Resource}.
    \item \textbf{ServiceAccessPoint} --- Represents an accessible API endpoint, connector, or other protocol that makes the service accessible to the outside world.
\end{itemize}

The relations between credentials can be seen visually in a diagram in Figure~\ref{fig:credential_relations}.

\begin{figure}
    \centering
    \includegraphics[width=\textwidth]{figures/credential-relations.png}
    \caption{Relations between different types of Gaia-X Credentials~\cite{gaiax_architecture_document}}\label{fig:credential_relations}
\end{figure}

Let's now examine each of the Credentials individually and their attributes.
The LegalRegistrationNumber Credential is omitted since it's issued by the Gaia-X Notary service based on the provided registration number and its successful validation and not self-signed by the participant.
Further information about the Notary service is provided in Section~\ref{subsec:gaia-x-notary}.

\pagebreak

\subsubsection{Participant}

\begin{longtable}{ |p{4cm}|p{2cm}|p{2cm}|p{7cm}| }
    \hhline{----}
    \textbf{Attribute} & \textbf{Mandatory} & \textbf{Multiple values allowed} & \textbf{Description}\\
    \hhline{----}
    \texttt{registrationNumber} & Yes & No & Unique registration number of the legal entity\\
    \hhline{----}
    \texttt{headquartersAddress.countryCode} & Yes & No & Country code of the company's headquarters in ISO 3166--2 format\\
    \hhline{----}
    \texttt{legalAddress.countryCode} & Yes & No & Country code of the company's legally registered address in ISO 3166--2 format\\
    \hhline{----}
    \texttt{parentOrganization} & No & Yes & List of direct Participants this entity is a subOrganization of\\
    \hhline{----}
    \texttt{parentOrganization} & No & Yes & List of direct Participants with a legal mandate on this entity (e.g., subsidiaries)\\
    \hhline{----}
    \caption{Participant Gaia-X Credential attributes~\cite{gaiax_trust_framework}.}
    \label{tab:participant}
\end{longtable}

\subsubsection{Resource}

\begin{longtable}{ |p{4cm}|p{2cm}|p{2cm}|p{7cm}| }
    \hhline{----}
    \textbf{Attribute} & \textbf{Mandatory} & \textbf{Multiple values allowed} & \textbf{Description}\\
    \hhline{----}
    \texttt{aggregationOf} & No & Yes & Resources related to the Resource and that can exist independently of it\\
    \hhline{----}
    \texttt{name} & No & No & A human readable name of the Resource\\
    \hhline{----}
    \texttt{description} & No & No & A free-text description of the Resource\\
    \hhline{----}
    \caption{Resource Gaia-X Credential attributes~\cite{gaiax_trust_framework}.}
    \label{tab:resource}
\end{longtable}

\pagebreak

\subsubsection{Physical Resource}

Physical Resource inherits from the Resource Credential and defines the following extra attributes~\cite{gaiax_trust_framework}.

\begin{longtable}{ |p{4cm}|p{2cm}|p{2cm}|p{7cm}| }
    \hhline{----}
    \textbf{Attribute} & \textbf{Mandatory} & \textbf{Multiple values allowed} & \textbf{Description}\\
    \hhline{----}
    \texttt{maintainedBy} & Yes & Yes & A list of Participants maintaining the Resource operational and having physical access to it\\
    \hhline{----}
    \texttt{ownedBy} & No & Yes & A list of Participants owning the Resource\\
    \hhline{----}
    \texttt{manufacturedBy} & No & Yes & A list of Participants manufacturing the Resource\\
    \hhline{----}
    \texttt{locationAddress[].countryCode} & Yes & Yes & A list of physical locations' country codes of the Resource in ISO 3166--2 format\\
    \hhline{----}
    \texttt{location[].gps} & No & Yes & A list of physical locations' GPS coordinates of the Resource in ISO 6709:2008/Cor~1:2009 format\\
    \hhline{----}
    \caption{PhysiscalResource Gaia-X Credential attributes~\cite{gaiax_trust_framework}.}
    \label{tab:physical_resource}
\end{longtable}

\subsubsection{Virtual Resource}

Virtual Resource inherits from the Resource Credential and defines the following extra attributes~\cite{gaiax_trust_framework}.

\begin{longtable}{ |p{4cm}|p{2cm}|p{2cm}|p{7cm}| }
    \hhline{----}
    \textbf{Attribute} & \textbf{Mandatory} & \textbf{Multiple values allowed} & \textbf{Description}\\
    \hhline{----}
    \texttt{copyrightOwnedBy} & Yes & Yes & A list of copyright owners of the Resource either as a free-text or as URLs from which can be resolved to the Participant Credential\\
    \hhline{----}
    \texttt{license} & Yes & Yes & A list of licenses either as SPDX\footnote{\url{https://spdx.org/licenses/}} identifiers or a URL to the license document\\
    \hhline{----}
    \texttt{policy} & Yes & Yes & A list of policies specified as described in section~\ref{sec:policies}\\
    \hhline{----}
    \caption{VirtualResource Gaia-X Credential attributes~\cite{gaiax_trust_framework}.}
    \label{tab:virtual_resource}
\end{longtable}

\subsubsection{Data Resource}

Data Resource inherits from the Virtual Resource Credential and defines the following extra attributes~\cite{gaiax_trust_framework}.

\begin{longtable}{ |p{4cm}|p{2cm}|p{2cm}|p{7cm}| }
    \hhline{----}
    \textbf{Attribute} & \textbf{Mandatory} & \textbf{Multiple values allowed} & \textbf{Description}\\
    \hhline{----}
    \texttt{producedBy} & Yes & No & A resolvable link to the Participant's Credential legally enabling the data usage\\
    \hhline{----}
    \texttt{exposedThrough} & Yes & Yes & A list resolvable links to the data exchange component that exposes the data resource\\
    \hhline{----}
    \texttt{obsoleteDateTime} & No & No & Date and time in ISO 8601 format after which data is obsolete\\
    \hhline{----}
    \texttt{expirationDateTime} & No & No & Date and time in ISO 8601 format after which data is expired and shall be deleted\\
    \hhline{----}
    \texttt{containsPII} & Yes & No & Whether the Resource contains \textit{Personally Identifiable Information}\\
    \hhline{----}
    \texttt{legalBasis} & Yes if containsPII & No & Reason for data collection in the Data Protection Regimes such as GDPR. Potential legal bases can be article 6, article 7 or article 9.
    It shall be expressed as a string matching \texttt{6.1.[a-f]}, \texttt{6.1.4}, \texttt{7} or \texttt{9.2.[a-j]}\\
    \texttt{dataProtectionContact} & Yes if containsPII & No & Means to raise personal data-protection-questions related to the data source.
    Either a URL resolved to a contact form or an email address\\
    \hhline{----}
    \caption{DataResource Gaia-X Credential attributes~\cite{gaiax_trust_framework}.}
    \label{tab:data_resource}
\end{longtable}

\subsubsection{Software Resource}

Software Resource inherits from the Virtual Resource Credential and doesn't define any extra attributes.

\subsubsection{Service Offering}

\begin{longtable}{ |p{4cm}|p{2cm}|p{2cm}|p{7cm}| }
    \hhline{----}
    \textbf{Attribute} & \textbf{Mandatory} & \textbf{Multiple values allowed} & \textbf{Description}\\
    \hhline{----}
    \texttt{name} & No & No & A human readable name of the ServiceOffering\\
    \hhline{----}
    \texttt{providedBy} & Yes & No & A resolvable link to the Participant's Credential providing the service\\
    \hhline{----}
    \texttt{aggregationOf} & No & Yes & A resolvable link to the Resource Credentials related to the service\\
    \hhline{----}
    \texttt{dependsOn} & No & Yes & A resolvable link to the ServiceOffering Credentials related to the service and that can exist independently of it\\
    \hhline{----}
    \texttt{termsAndConditions} & Yes & Yes & A resolvable link to the terms and conditions applying to the service.
    Consists of \texttt{URL} and \texttt{hash}\\
    \hhline{----}
    \texttt{policy} & Yes & Yes & A list of policies specified as described in section~\ref{sec:policies}\\
    \hhline{----}
    \texttt{dataProtectionRegime} & No & Yes & A data protection regime used for the data (e.g., \textit{GDPR2016}, \textit{LGPD2019}, \textit{PDPA2012}, \textit{CCPA2018}, \textit{VCDPA2021})\\
    \hhline{----}
    \texttt{dataAccountExport[].requestType} & Yes & Yes & Request type for exporting personal and non-personal data out of the service.
    One of \texttt{API}, \texttt{email}, \texttt{webform}, \texttt{unregisteredLetter}, \texttt{registeredLetter}, \texttt{supportCenter}\\
    \hhline{----}
    \texttt{dataAccountExport[].accessType} & Yes & Yes & Type of data support for exporting personal and non-personal data out of the service.
    One of (\texttt{digital}, \texttt{physical})\\
    \hhline{----}
    \texttt{dataAccountExport[].formatType} & Yes & Yes & Type of format for the export of personal and non-personal data out of the service.
    Must be one of the Media Types\footnote{\url{https://www.iana.org/assignments/media-types/media-types.xhtml}} as defined by IANA\\
    \hhline{----}
    \caption{ServiceOffering Gaia-X Credential attributes~\cite{gaiax_trust_framework}.}
    \label{tab:service_offering}
\end{longtable}

\subsubsection{Service Instance}

\begin{longtable}{ |p{4cm}|p{2cm}|p{2cm}|p{7cm}| }
    \hhline{----}
    \textbf{Attribute} & \textbf{Mandatory} & \textbf{Multiple values allowed} & \textbf{Description}\\
    \hhline{----}
    \texttt{maintainedBy} & Yes & Yes & A list of Participants maintaining the Instantiated Virtual Resource operational\\
    \hhline{----}
    \texttt{hostedOn} & Yes & No & A Physical Resource, where the process is located\\
    \hhline{----}
    \texttt{instanceOf} & Yes & No & A resolvable link to the Virtual Resource Credential (normally a Software Resource) this process is an instance of\\
    \hhline{----}
    \texttt{dependsOn} & No & Yes & A resolvable link to the ServiceOffering Credentials related to the service and that can exist independently of it\\
    \hhline{----}
    \texttt{tenantOwnedBy} & Yes & Yes & A list of Participants with contractual relation to the Resource\\
    \hhline{----}
    \texttt{serviceAccessPoint} & Yes & Yes & A list of URLs resolvable to the Service Access Point credential\\
    \hhline{----}
    \caption{ServiceInstance Gaia-X Credential attributes~\cite{gaiax_trust_framework}.}
    \label{tab:service_instance}
\end{longtable}

\subsubsection{Service Access Point}

\begin{longtable}{ |p{4cm}|p{2cm}|p{2cm}|p{7cm}| }
    \hhline{----}
    \textbf{Attribute} & \textbf{Mandatory} & \textbf{Multiple values allowed} & \textbf{Description}\\
    \hhline{----}
    \texttt{name} & No & No & The name of the endpoint\\
    \hhline{----}
    \texttt{hostedOn} & No & No & The host of the endpoint\\
    \hhline{----}
    \texttt{protocol} & No & Yes & The protocol(s) of the endpoint\\
    \hhline{----}
    \texttt{version} & No & No & The version of the endpoint\\
    \hhline{----}
    \texttt{port} & No & Yes & The port(s) of the endpoint\\
    \hhline{----}
    \texttt{openAPI} & No & Yes & A list of URLs hosting a the documentation in the OpenAPI format\\
    \hhline{----}
    \caption{ServiceAccessPoint Gaia-X Credential attributes~\cite{gaiax_trust_framework}.}
    \label{tab:service_access_point}
\end{longtable}

\subsection{Data Exchange Gaia-X Credentials}\label{subsec:data-exchange-gaia-x-credentials}

In the context of data offerings and data exchange, the \textit{Data Exchange Services Specifications} document~\cite{gaiax_data_exchange_document} defines another set of Gaia-X credentials.
The document introduces new Participant roles (\texttt{DataProductProvider}, \texttt{DataLicensor}, \texttt{DataProducer} and \texttt{DataConsumer}) and specifies Credentials describing data, the dataset, its distribution, and the possible contract between Data Consumer and Data Product Provider.
Following data-exchange-specific types of Gaia-X Credentials are defined:
\begin{itemize}
    \item \textbf{DataProductDescription} --- Inherits the ServiceOffering Credential attributes and extends the W3C Data Catalog Vocabulary (DCAT) Resource class\footnote{\url{https://www.w3.org/TR/vocab-dcat-3/\#Class\%3AResource}}.
    \item \textbf{DatasetDescription} --- Represents a description of the offered dataset.
    It extends attributes of the W3C DCAT Dataset class\footnote{\url{https://www.w3.org/TR/vocab-dcat-3/\#Class\%3ADataset}}.
    \item \textbf{DataUsage} --- Represents details related to data usage.
    Currently only an optional logging service can be specified.
    \item \textbf{DataProductUsageContract} --- Specifies the final contract between DataConsumer and DataProductProvider, allowing the consumer to use the data.
\end{itemize}

Let's examine each data exchange-related Credentials individually along with their attributes.

\subsubsection{DataProductDescription}

Data Product Description inherits Service Offering Credentials and defines the following attributes~\cite{gaiax_data_exchange_document}.

\begin{longtable}{ |p{4cm}|p{2cm}|p{2cm}|p{7cm}| }
    \hhline{----}
    \textbf{Attribute} & \textbf{Mandatory} & \textbf{Multiple values allowed} & \textbf{Description}\\
    \hhline{----}
    \texttt{providedBy} & Yes & No & A resolvable link to the Participant's Credential providing the data\\
    \hhline{----}
    \texttt{termsAndConditions} & Yes & No & A resolvable link to the terms and conditions applying to the service\\
    \hhline{----}
    \texttt{license} & Yes & Yes & A list of URLs to the license documents\\
    \hhline{----}
    \texttt{title} & Yes & No & A human readable title of the Data Product\\
    \hhline{----}
    \texttt{description} & No & No & A free-text description of the Data Product\\
    \hhline{----}
    \texttt{issued} & No & No & Date and time in ISO 8601 format of when the data was issued\\
    \hhline{----}
    \texttt{obsoleteDateTime} & No & No & Date and time in ISO 8601 format of when the data is obsolete\\
    \hhline{----}
    \texttt{hasPolicy} & No & No & A policy specified as described in section~\ref{sec:policies}\\
    \hhline{----}
    \texttt{dataLicensors} & No & Yes & A list of resolvable links to the data licensors Participants' Credentials or a free-form string\\
    \hhline{----}
    \texttt{dataUsageAgreement} & Yes if containsPII & Yes & A list of authorizations from the data subjects as Natural Person
    Specified as the \texttt{DataUsageAgreement} object\\
    \hhline{----}
    \texttt{aggregationOf} & Yes & Yes & A list of resolvable links to the DatasetDescription Credentials\\
    \hhline{----}
    \texttt{identifier} & Yes & No & A unique UUID4 identifier\\
    \hhline{----}
    \texttt{contactPoint} & No & No & A contact to get more information in vCard format\\
    \hhline{----}
    \texttt{conformsTo} & No & Yes & List of established standards the data conforms to\\
    \hhline{----}
    \caption{DataProductDesctiption Gaia-X Credential attributes~\cite{gaiax_data_exchange_document}.}
    \label{tab:data_product_description}
\end{longtable}

\subsubsection{DatasetDescription}

Data Product Description inherits Service Offering Credentials and defines the following attributes~\cite{gaiax_data_exchange_document}.

\begin{longtable}{ |p{4cm}|p{2cm}|p{2cm}|p{7cm}| }
    \hhline{----}
    \textbf{Attribute} & \textbf{Mandatory} & \textbf{Multiple values allowed} & \textbf{Description}\\
    \hhline{----}
    \texttt{title} & Yes & No & A human readable title of the Dataset\\
    \hhline{----}
    \texttt{distributions} & Yes & Yes & A list of descriptions of the dataset distributions\\
    \hhline{----}
    \texttt{identifier} & Yes & No & A unique UUID4 identifier\\
    \hhline{----}
    \texttt{issued} & No & No & Date and time in ISO 8601 format of when the data was issued\\
    \hhline{----}
    \texttt{expirationDateTime} & No & No & Date and time in ISO 8601 format of when the data is expired and shall be deleted\\
    \hhline{----}
    \texttt{license} & No & Yes & A list of URLs to the license documents\\
    \hhline{----}
    \texttt{dataLicensors} & No & Yes & A list of resolvable links to the data licensors Participants' Credentials or a free-form string\\
    \hhline{----}
    \texttt{dataUsageAgreement} & Yes if containsPII & Yes & A list of authorizations from the data subjects as Natural Person
    Specified as the \texttt{DataUsageAgreement} object\\
    \hhline{----}
    \texttt{exposedThrough} & Yes & Yes & A list of resolvable links to the data exchange component that exposes the dataset\\
    \hhline{----}
    \caption{DatasetDescription Gaia-X Credential attributes~\cite{gaiax_data_exchange_document}.}
    \label{tab:dataset_description}
\end{longtable}

\subsubsection{DataUsage}

\begin{longtable}{ |p{4cm}|p{2cm}|p{2cm}|p{7cm}| }
    \hhline{----}
    \textbf{Attribute} & \textbf{Mandatory} & \textbf{Multiple values allowed} & \textbf{Description}\\
    \hhline{----}
    \texttt{loggingService} & No & No & A link to the logging service\\
    \hhline{----}
    \caption{DataUsage Gaia-X Credential attributes~\cite{gaiax_data_exchange_document}.}
    \label{tab:data_usage}
\end{longtable}

\subsubsection{DataProductUsageContract}

\begin{longtable}{ |p{4cm}|p{2cm}|p{2cm}|p{7cm}| }
    \hhline{----}
    \textbf{Attribute} & \textbf{Mandatory} & \textbf{Multiple values allowed} & \textbf{Description}\\
    \hhline{----}
    \texttt{providedBy} & Yes & No & A resolvable link to the Participant's Credential providing the data\\
    \hhline{----}
    \texttt{consumedBy} & Yes & No & A resolvable link to the Participant's Credential consuming the data\\
    \hhline{----}
    \texttt{dataProduct} & Yes & No & A resolvable link to the Data Product Description Credential subject to the contract\\
    \hhline{----}
    \texttt{signers} & Yes & Yes & A list of Signature Check Type objects identifying all required Participant signatures\\
    \hhline{----}
    \texttt{termOfUsage} & Yes & No & A resolvable link to the term of usage\\
    \hhline{----}
    \texttt{notarizedIn} & No & No & A resolvable link to the Notarization service\\
    \hhline{----}
    \texttt{dataUsage} & Yes & No & A resolvable link to the Data Usage Credential\\
    \hhline{----}
    \caption{DataProductUsageContract Gaia-X Credential attributes~\cite{gaiax_data_exchange_document}.}
    \label{tab:data_product_usage_contract}
\end{longtable}

\subsubsection{DistributionDescription}

Specifies mainly the dataset details related to the physical dataset file, like the format, hash and language,~\ldots.
It is not a standalone Gaia-X Credential but an object that needs to be specified in the \texttt{DatasetDescription} Credential.

\begin{longtable}{ |p{4cm}|p{2cm}|p{2cm}|p{7cm}| }
    \hhline{----}
    \textbf{Attribute} & \textbf{Mandatory} & \textbf{Multiple values allowed} & \textbf{Description}\\
    \hhline{----}
    \texttt{title} & Yes & No & A human readable title of the Dataset\\
    \hhline{----}
    \texttt{format} & Yes & No & Dataset specified via the Media Types\footnote{\url{https://www.iana.org/assignments/media-types/media-types.xhtml}} as defined by IANA\\
    \hhline{----}
    \texttt{compressFormat} & No & No & The compression format used, in case the data is contained in compressed form\\
    \hhline{----}
    \texttt{packageFormat} & No & No & The package format of the distribution in which one or more data files are grouped together\\
    \hhline{----}
    \texttt{byteSize} & No & No & Size of the dataset distribution in bytes\\
    \hhline{----}
    \texttt{location} & No & Yes & A list of the dataset storage location\\
    \hhline{----}
    \texttt{hash} & No & No & A hash of the distribution to uniquely identify the data contained in the distribution\\
    \hhline{----}
    \texttt{hashAlgorithm} & No & No & An algorithm used to produce the hash value\\
    \hhline{----}
    \texttt{issued} & No & No & Date and time in ISO 8601 format of when the data was published\\
    \hhline{----}
    \texttt{expirationDateTime} & No & No & Date and time in ISO 8601 format of when the data is expired and shall be deleted\\
    \hhline{----}
    \texttt{language} & No & No & Language of the dataset distribution in ISO 639-1:2002 format\\
    \hhline{----}
    \texttt{license} & No & Yes & A list of URLs to the license documents\\
    \hhline{----}
    \texttt{dataLicensors} & No & Yes & A list of resolvable links to the data licensors Participants' Credentials or a free-form string\\
    \hhline{----}
    \texttt{dataUsageAgreement} & Yes if containsPII & Yes & A list of authorizations from the data subjects as Natural Person.
    Specified as the \texttt{DataUsageAgreement} object\\
    \hhline{----}
    \caption{DistributionDescription Gaia-X object~\cite{gaiax_data_exchange_document}.}
    \label{tab:distribution_description}
\end{longtable}

\subsubsection{DataUsageAgreement}
Specifies details like licensors, providers, producers of the data, and required signers of the data usage contract.
It is not a standalone Gaia-X Credential but an object that needs to be specified in \texttt{DataProductDescription} and \texttt{DatasetDescription} Credentials if the data contains PIIs.

\begin{longtable}{ |p{4cm}|p{2cm}|p{2cm}|p{7cm}| }
    \hhline{----}
    \textbf{Attribute} & \textbf{Mandatory} & \textbf{Multiple values allowed} & \textbf{Description}\\
    \hhline{----}
    \texttt{producedBy} & Yes & No & A resolvable link to the Participant's Credential producing the data\\
    \hhline{----}
    \texttt{providedBy} & Yes & No & A resolvable link to the Participant's Credential providing the data\\
    \hhline{----}
    \texttt{licensedBy} & No & Yes & A list of resolvable links to the Participants' Credentials licensing the data\\
    \hhline{----}
    \texttt{dataUsageAgreementTrustAnchor} & Yes & No & A resolvable link to Data Usage Agreement Trust Anchor\\
    \hhline{----}
    \texttt{dataProduct} & Yes & No & A resolvable link to the DataProductDescription Credential\\
    \hhline{----}
    \texttt{signers} & Yes & Yes & A list of Signature Check Type objects identifying all required Participant signatures\\
    \hhline{----}
    \caption{DataUsageAgreement Gaia-X object~\cite{gaiax_data_exchange_document}}
    \label{tab:data_usage_agreement}
\end{longtable}

\begin{figure}
    \centering
    \includegraphics[width=\textwidth]{figures/data-product-conceptual-model.png}
    \caption{Interactions among different data-related Gaia-X Credentials~\cite{gaiax_architecture_document}.}\label{fig:data_product_conteptual_model}
\end{figure}

\section{Decentralized Identifiers}\label{sec:decentralized-identifiers}

When creating a Verifiable Credential, it is necessary to identify the issuer unambiguously.
Hence, the W3C stipulates that the value of the \texttt{issuer} property must be a URL (Uniform Resource Locator) or object containing property \texttt{id} with URL as the value~\cite{verifiable_credentials}.
Gaia-X further restricts this rule, requiring the \texttt{issuer} property to contain a Decentralized Identifier (DID)~\cite{did}.
DIDs are designed in a way to be used without the need to use \textit{centralized registries}, which fits nicely into the ideology of Gaia-X.
While a third party may be needed to enable the discovery of information related to a DID, the DID design allows its controller to prove its control over the Decentralized Identifier without requiring permission from any other party.

Figure~\ref{fig:did_structure} depicts the general structure of a Decentralized Identifier.
Gaia-X specifically uses the DID \texttt{web} method~\cite{didweb}, which allows the holder to publish a DID document on a public webserver that is accessible using the HTTPS protocol.
For example, the DID \texttt{did:web:gaia-x-dev.simerda.dev:gaia-x:john-doe} gets resolved to the URL \url{https://gaia-x-dev.simerda.dev/gaia-x/john-doe/did.json}.
The resolved URL then hosts a document containing the ID itself, mainly the \textit{verification method} and \textit{algorithms} used with this DID.
The example document corresponding to the example DID can be seen in Figure~\ref{fig:did_document}; it specifies the X.509 certificate used and the algorithm used for signing (RS256).
In relation to VCs and Gaia-X Credentials, the verifier of the credential can resolve the DID document and use the information provided to verify the signature included in the credential.

\begin{figure}
    \centering
    \includegraphics[width=0.7\textwidth]{figures/parts-of-a-did.png}
    \caption{A general structure of a Decentralized Identifier~\cite{did}.}\label{fig:did_structure}
\end{figure}

\begin{figure}
    \centering
    \begin{minted}[bgcolor=LightGray,breaklines,breakanywhere]{json}
{
  "@context": [
    "https://www.w3.org/ns/did/v1",
    "https://w3id.org/security/suites/jws-2020/v1"
  ],
  "id": "did:web:gaia-x-dev.simerda.dev:gaia-x:acme-corp",
  "verificationMethod": [
    {
      "id": "did:web:gaia-x-dev.simerda.dev:gaia-x:acme-corp#JWK2020-RSA",
      "type": "JsonWebKey2020",
      "controller": "did:web:gaia-x-dev.simerda.dev:gaia-x:acme-corp",
      "publicKeyJwk": {
        "kty": "RSA",
        "n": "1BQuEryN-A0p-TI8HOtN5xB8rwbyUre4e0fhUiPECFvd58xX_gsiMFqrsDb3ZcrnaE-0o4StXy5A0GFBouuwGX1UlZQ1V9PiPXbd05vAbv4T7xGeAuzhDbgZviiJb-SsLFAZQc6UDC5eeM1x7_KWgRCB82Nc9BGfCxLz3U6dyzrUZq8VKn9S3mkKLLuslewa00X8TCHEAVQFEktVV9F617GXEknrEZhKoZfPeuiweMj4FxuamBRQPaZlCWQduiDnVkmNu4pr7C7HJQkBxxH-D32IhxGrSg1mQtaSO-wbYgqVMoDyWFmdUGoiQmocXWKwRBC0zuxvxgninAB7wTywbQ",
        "e": "AQAB",
        "alg": "RS256",
        "x5u": "https://gaia-x-dev.simerda.dev/gaia-x/acme-corp/cert.pem"
      }
    }
  ],
  "assertionMethod": [
    "did:web:gaia-x-dev.simerda.dev:gaia-x:acme-corp#JWK2020-RSA"
  ]
}
    \end{minted}
    \caption{An example of a DID document.}\label{fig:did_document}
\end{figure}

\section{Trust Anchors}\label{sec:trust-anchors}

Trust Anchors are entities that underpin the claims of Participants and are endorsed by Gaia-X~\cite{gaiax_trust_framework}.
They facilitate the processing of claims made by Participants and shall do so via \textit{fair} and \textit{transparent} procedures, thus affirming the trust in otherwise mere self-declared statements.
Trust Anchors may underpin any aspect of the Participant's operation; however, Gaia-X will only be interested in aspects relating to relevant criteria stemming from the issued specifications.

In reality, the abstract term ``Trust Anchors'' primarily refers to the Trust Service Providers (TSPs) or Certification Authorities (CAs) from which a Participant is permitted to obtain \textit{digital certificates}.
A notable exception is for the Credential \texttt{LegalRegistrationNumber}, where the \textit{Gaia-X Association} nominated itself as a valid Trust Anchor to validate legal persons' registration numbers via the notary service.
These certificates are necessary for signing Gaia-X Credentials to ensure trust and compliance with Gaia-X standards.
The exact permissible Trust Anchors are defined in Table~\ref{tab:trust_anchors}.

\begin{figure}
    \centering
    \includegraphics[width=\textwidth]{figures/vc_model.png}
    \caption{Interactions among different Participant roles in the Gaia-X Trust Framework~\cite{gaiax_trust_framework}.}\label{fig:trust_framework_interactions}
\end{figure}

\begin{longtable}{ |p{4cm}|p{11cm}| }
    \hhline{--}
    \textbf{Name} & \textbf{Defined as}\\
    \hhline{--}
    State & The Trust Service Providers (TSP) must be a state validated identity issuers or EV SSL issuers.
    - For participant, if the \texttt{legalAddress.country} is in EEA, valid state identity issuers are eIDAS ones.
    - \texttt{Gaia-X Association} may also be a valid TSP for the association's members.\\
    \hhline{--}
    eIDAS & Issuers of Qualified Certificate for Electronic Signature as defined in eIDAS Regulation (EU) No 910/2014
    (homepage: \url{https://esignature.ec.europa.eu/efda/tl-browser/\#/screen/home})
    (machine: \url{https://ec.europa.eu/tools/lotl/eu-lotl.xml})\\
    \hhline{--}
    EV SSL & Extended Validation (EV) Secure Sockets Layer (SSL) certificate issuers are considered to be temporarily valid TSPs.
    (homepage: \url{https://wiki.mozilla.org/CA/Included_Certificates})
    (machine: \url{https://ccadb-public.secure.force.com/mozilla/IncludedCACertificateReportPEMCSV})\\
    \hhline{--}
    \texttt{registrationNumberIssuer} & During the pilot phase, the Gaia-X Association nominated itself as a valid Trust Anchor under \url{https://notary.gaia-x.eu}\\
    \hhline{--}
    \caption{A list of valid Trust Anchors~\cite{gaiax_trust_framework}.}
    \label{tab:trust_anchors}
\end{longtable}

\section{Policies}\label{sec:policies}

Policies in the Gaia-X ecosystem are statements, rules, or assertions that specify an entity's correct or expected behavior~\cite{gaiax_architecture_document}.
Gaia-X defines policies for all service providers and service offerings.
They specify, for example, the rules governing \textit{privacy} and \textit{cybersecurity} expressed indirectly in the Gaia-X specification as rules for the attributes in the Gaia-X credentials.
In addition to the general policies, the Gaia-X ecosystem allows Participants to define further restrictions by using so-called policy descriptions.

The policies on the consumer side can be used to describe restrictions when searching for a service or resource they want to consume, for example, the location of the service provider or a particular service level~\cite{gaiax_architecture_document}.
On the other hand, the provider can define their policies on the Gaia-X credentials (Service Offering, Data Resource, etc.), imposing \textit{usage restrictions} on the provided service, for example, restricting the timeframe when the consumer can access provided data.
Both of these participant-defined policies are called \textit{``Policy descriptions.''}
The relation between different types of policies is visually depicted in Figure~\ref{fig:gaiax_policies}.

\begin{figure}
    \centering
    \includegraphics[width=0.7\textwidth]{figures/policies.png}
    \caption{Relations between different types of Gaia-X Policies~\cite{gaiax_architecture_document}.}\label{fig:gaiax_policies}
\end{figure}

\subsection{Policies for Data Exchange}\label{subsec:policies-for-data-exchange}

A specific subset of Gaia-X policies are policies for data exchange~\cite{gaiax_data_exchange_document}.
They are divided into two categories: contract policies and runtime policies.

Contract policies serve as an interoperable human and machine-readable basis for a contract between the participants.
They contain \textit{access} and \textit{usage control} policies, denoted in an ORDL DSL\footnote{Domain Specific Language is a programming language with a higher level of abstraction optimized for a specific set of problems~\cite{domain_specific_languages}.}.
ORDL is used to describe the usage control and access control policies:

\begin{itemize}
    \item \textbf{Usage control} --- Regulates the obligations surrounding data processing.
    It is relevant in the context of intellectual property protection, compliance with regulations, and, more generally, digital rights management.
    For example, the following policy classes can be defined:
    \begin{itemize}
        \item Interval-restricted Data Usage
        \item Location Restricted Policy
        \item Perpetual Data Sale (Payment once)
        \item Data Rental (Payment frequently)
        \item Purpose-restricted Data Usage Policy
        \item Use Data and Delete it After (allows data usage within a specified time interval with the restriction to delete it at a specified time stamp)
        \item Attach Policy when distributing to a third party
        \item Distribute only if Encrypted
    \end{itemize}
    \item \textbf{Access control} --- Restricts access to provided resources by defining attribute values that the subject must attest in order to be granted access.
\end{itemize}

Let's take a look at the main concepts of ORLD~\cite{gaiax_data_exchange_document}:
\begin{itemize}
    \item \textbf{Policy} ---Groups a set of rules (permission, prohibitions, or obligations).
    It has three subclasses:
    \begin{itemize}
        \item \textbf{Set}: A generic collection of rules.
        \item \textbf{Offer}: A collection of rules offered by an actor designated by the \texttt{assigner} property.
        \item \textbf{Agreement}: A collection of rules agreed upon by \texttt{assignee} and \texttt{assigner} actors.
    \end{itemize}
    \item \textbf{Rule} --- Defines a rule via asset (defines the target resource), action (defines the operation to be performed), constraint (defines conditions under which the rule is valid), and party (defines actors involved in the rule).
    It has three subclasses:
    \begin{itemize}
        \item \textbf{Permission}: Grants permission for the actor to perform the action.
        \item \textbf{Duty}: Obliges the actor to perform the action.
        \item \textbf{Prohibition}: Prohibits the actor from performing the action.
    \end{itemize}
    \item \textbf{Asset} --- Specifies a resource or a collection of resources.
    \item \textbf{Action} --- Specifies an operation that can be performed on an asset.
    The main two actions are \texttt{use} and \texttt{transfer}.
    \item \textbf{Constraint} --- Specifies a logical expression, allowing filtering on different collections.
    Comparison operators like \texttt{lt}, \texttt{lteq}, \texttt{eq}, \texttt{gteq}, and \texttt{gt} meaning ``less than,'' ``less than or equal,'' ``equal,'' ``greater than or equal,'' and ``greater than'' respectively can be used in the expression.
    Apart from comparison operators, logical operators \texttt{or}, \texttt{xone}, \texttt{and}, \texttt{andSequence} can also be used.
    \item \textbf{Party} --- Specifies an actor or a collection of actors with a functional role in a rule.
    An actor can have the \texttt{assignee} or the \texttt{assigner} role, meaning the recipient of the rule or the issuer of the rule, respectively
\end{itemize}

Figure~\ref{fig:ordl_example} showcases a JSON-LD-formatted policy obliging the \textit{``Data Consumer''} to pay500~\char"20AC~ and defining a duty (under the \texttt{obligation} attribute) for the \textit{``Data Consumer''} to distribute the example dataset to the \textit{``Data Consumer.''}

\begin{figure}
    \centering
    \begin{minted}[bgcolor=LightGray,breaklines]{json}
{
 "@context": "https://www.w3.org/ns/odrl.jsonld",
 "@type": "Set",
 "uid": "https://data-exchange.com/policy:1",
 "permission": [
   {
     "target": "https://data-exchange.com/dataset/123",
     "assignee": "Data Consumer",
     "action": "use",
     "duty": [
       {
         "assigner": "Data Provider",
         "assignee": "Data Consumer",
         "action": [
           {
             "value": "compensate",
             "refinement": [
               {
                 "leftOperand": "payAmount",
                 "operator": "eq",
                 "rightOperand": { "@value": "500.00", "@type": "xsd:decimal" },
                 "unit": "https://dbpedia.org/resource/Euro"
               }
             ]
           }
         ]
       }
     ]
   }
 ],
 "obligation": [
   {
     "target": "https://data-exchange.com/dataset/123",
     "assigner": "Data Consumer",
     "assignee": "Data Provider",
     "action": "distribute"
   }
 ]
}
    \end{minted}
    \caption{Example of an ORDL policy obliging the \textit{``Data Provider''} to provide a dataset upon \textit{``Data Consumer's''} payment of 500~\char"20AC~~\cite{gaiax_data_exchange_document}.}\label{fig:ordl_example}
\end{figure}

Outside data exchange, runtime policies are described using a REGO DSL --- the declarative language used for specifying so-called \textit{decisions}, which describe the conditions under which access is allowed or disallowed.
A \textit{policy engine} is then used for executing queries over the policy, which can be used by consumers to filter desired service offerings.
An example of a REGO policy modifying data retention and data policy can be seen in Figure~\ref{fig:rego_policy_example}.

\begin{figure}
    \centering
    \begin{minted}[bgcolor=LightGray,breaklines]{prolog}
default allow := false

allow if {
   shortRetention
   locatedInEEA
}

shortRetention if input.DataRetention < data.maxDataRetention

locatedInEEA if input.processingLocation.countryCode == data.EEA[_][_]
    \end{minted}
    \caption{Example of a REGO policy specifying the required data retention and data location~\cite{gaiax_compliance_as_a_code}.}\label{fig:rego_policy_example}
\end{figure}

The fact that policies in Gaia-X are machine-readable allows for \textit{automated contract negotiation} between provider and consumer~\cite{gaiax_data_exchange_document}.
The consumer can search for the desired service offering, initiate a contract negotiation sequence, and exchange counter-offers until an agreement is reached, which is confirmed by all participants electronically signing the contract.

\section{Trust Framework Components}\label{sec:trust-framework-components}

This section describes the software components operated by the Gaia-X Digital Clearing Houses (GXDCHs).
A Gaia-X Digital Clearing House~\cite{gaiax} is a term describing a network of execution nodes.
They operationalize the theoretical Gaia-X Framework by enforcing the set of rules defined in Gaia-X specifications and providing Gaia-X compliance.

Four other companies operate the services along with \textit{Gaia-X Lab}\footnote{A team of developers working under the umbrella of the Gaia-X Association.}, making it a decentralized system.
The GXCHs consist of three mandatory services: Gaia-X Compliance, Gaia-X Registry, and Gaia-X Notary.
The fact that policies in Gaia-X are machine-readable allows for automated contract negotiation between provider and consumer.
The consumer can search for the desired service offering, initiate a contract negotiation sequence, and exchange counter-offers until an agreement is reached, which is confirmed by all participants electronically signing the contract.

\subsection{Gaia-X Compliance}\label{subsec:gaia-x-compliance}

The purpose of this service is to accept Gaia-X Credentials (wrapped in a Verifiable Presentation\footnote{The Verifiable Presentation is a simple JSON-LD document, wrapping the VCs in an array.}), check them against the defined schemas, and verify their validity using syntactic, consistency, and cryptographical checks.
If all the checks pass, the service returns a Gaia-X Credential with a Gaia-X signature as proof that the input provided has passed all the verifications, proving the Participant's compliance.

\subsection{Gaia-X Registry}\label{subsec:gaia-x-registry}

The Registry is the backbone of the Gaia-X ecosystem governance, acting as a non-repudiable, immutable, and permissionless database~\cite{gaiax_trust_framework}.
The database stores the following information:
\begin{itemize}
    \item The list of the Trust Anchors – keyring.
    \item The result of the Trust Anchors validation processes.
    \item The potential revocation of Trust Anchors' identity.
    \item The  vote and results of the Gaia-X Association roll call vote, similar to the rules of the plenary of the European Parliament.
    \item The shapes and schemas for the Gaia-X VCs.
    \item The URLs of Gaia-X Catalogue's credentials.
    \item The text of the Terms and Conditions for Gaia-X Conformity.
\end{itemize}

\subsection{Gaia-X Notary}\label{subsec:gaia-x-notary}

Currently, the Notary service serves the singular purpose of validating the Participant's legal registration number~\cite{gaiax_trust_framework}.
It checks that the Gaia-X credential contains at least one of the permissible legal entity identification numbers stated in the Gaia-X's specifications and validates it using external services.
Upon successful validation, a Gaia-X Credential will be issued attesting to these claims.

In the future, the notary shall also notarize Data Product Usage Contracts~\cite{gaiax_data_exchange_document}.
